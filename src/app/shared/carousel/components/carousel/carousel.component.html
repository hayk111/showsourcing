<div class="ctnr" (fileDrop)="add($event)">

	<!-- image -->
	<div class="img-ctnr flexCenter"	[ngStyle]="{'transform': getRotation(getImg())}">
		<img-app
			#imgApp
			*ngIf="images?.length !== 0; else noImg"
			class="pointer"
			[ngStyle]="{ 'height': size + 'px', 'width': size + 'px' }"
			[image]="getImg()"
			[size]="'xl'"
			[objectFit]="objectFit"
			(click)="modalCarousel.open()">
		</img-app>

		<!-- no image -->
		<ng-template #noImg>
			<div
				class="flexColumn flexCenter empty"
				[ngStyle]="{ 'height': size + 'px', 'width': size + 'px' }">
				<span class="bold" i18n="text@@no-picture">No picture</span>
				<button *ngIf="!static" class="secondary" tabFocusAction (click)="openFileBrowser()" (keyEnter)="openFileBrowser()"  i18n="button@@add-picture">Add picture</button>
			</div>
		</ng-template>
	</div>

  <spinner-app *ngIf="getImg()?.pending" size="xl"></spinner-app>

	<!-- move back -->
	<div
		*ngIf="images?.length > 1"
		class="move-btn back flexCenter circle pointer btn action"
		(mousedown)="back($event)">
		<icon-app  fontSet="fa" name="angle-left" color="white"></icon-app>
	</div>

	<!-- move next -->
	<div
		*ngIf="images?.length > 1"
		class="move-btn next flexCenter circle pointer btn action"
		(mousedown)="next($event)">
	<icon-app fontSet="fa" name="angle-right" color="white"></icon-app>
	</div>

	<!-- menu -->
	<context-menu-app class="menu action" *ngIf="!static">
		<context-menu-trigger-app>
				<icon-app
					fontSet="fa"
					name="ellipsis-v"
					color="white"
					class="btn"
					aria-label="more">
				</icon-app>
		</context-menu-trigger-app>
		<context-menu-item-app>
			<a [href]="getImg() | image:'xl'" download i18n="button@@download">download</a>
		</context-menu-item-app>
		<context-menu-item-app (click)="rotate()" i18n="button@@rotate">rotate</context-menu-item-app>
		<context-menu-item-app (click)="delete()" i18n="button@@delete">delete</context-menu-item-app>
	</context-menu-app>

	<!-- add -->
	<div *ngIf="!static" class="btn add pointer action" (click)="openFileBrowser()" i18n="button@@add">add</div>

	<!-- counter -->
	<div class="counter flexCenter">
		<div
			*ngFor="let image of images; index as i; trackBy: trackByFn"
			class="dot {{ i === selectedIndex ? 'full' : '' }}">
		</div>
	</div>


	<modal-carousel-app
		#modalCarousel
		[selectedIndex]="selectedIndex"
		[images]="images"
		[entity]="entity"
		(delete)="delete()"
		(indexChange)="selectedIndex = $event">
	</modal-carousel-app>

	<!-- input used to input files -->
	<input *ngIf="!static" #inpFile multiple="true" type="file" accept="image/*" (fileSelect)="add($event)"/>

</div>

<image-previewer-2-app
	*ngIf="hasPreview && images.length > 0"
	[images]="images"
	(imageClick)="selectedIndex = $event">
</image-previewer-2-app>


