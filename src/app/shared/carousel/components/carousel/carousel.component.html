<div class="ctnr" (fileDrop)="add($event)">

	<!-- image -->
	<div class="img-ctnr flexCenter"	[ngStyle]="{'transform': getRotation(getImg())}">
		<img-app
			#imgApp
			*ngIf="images?.length !== 0; else noImg"
			class="pointer"
			[ngStyle]="{ 'height': size + 'px', 'width': size + 'px' }"
			[image]="getImg()"
			[size]="'xl'"
			[objectFit]="objectFit"
			(click)="modalCarousel.open()">
		</img-app>

		<!-- no image -->
		<ng-template #noImg>
			<div
				class="flexColumn flexCenter empty"
				[ngStyle]="{ 'height': size + 'px', 'width': size + 'px' }">
				<span class="bold" translate="text.no-picture"></span>
				<button *ngIf="!static" class="secondary" tabFocusAction (click)="openFileBrowser()" (keyEnter)="openFileBrowser()" translate="button.add-picture"></button>
			</div>
		</ng-template>
	</div>

  <spinner-app *ngIf="getImg()?.pending" size="xl"></spinner-app>

	<!-- move back -->
	<div
		*ngIf="images?.length > 1"
		class="move-btn back flexCenter circle pointer btn visible-on-hover"
		(mousedown)="back($event)">
		<icon-app name="angle-left" color="white"></icon-app>
	</div>

	<!-- move next -->
	<div
		*ngIf="images?.length > 1"
		class="move-btn next flexCenter circle pointer btn visible-on-hover"
		(mousedown)="next($event)">
		<icon-app name="angle-right" color="white"></icon-app>
	</div>

	<!-- menu -->
	<context-menu-app class="menu visible-on-hover" *ngIf="!static">
		<context-menu-trigger-app>
				<icon-app
					name="dots-vertical"
					color="white"
					class="btn"
					aria-label="more">
				</icon-app>
		</context-menu-trigger-app>
		<context-menu-item-app>
			<a [href]="getImg() | image:'xl'" download translate="button.download"></a>
		</context-menu-item-app>
		<context-menu-item-app (click)="rotate()" translate="button.rotate"></context-menu-item-app>
		<context-menu-item-warn-app (click)="delete()" translate="button.delete"></context-menu-item-warn-app>
	</context-menu-app>

	<!-- number of pictures -->
	<div *ngIf="isImagePropertyArray && images?.length" class="image-counter flexCenter absolute">
		<icon-app name="pictures" [size]="19"></icon-app>
		<span class="text-image-counter">{{ selectedIndex + 1 }} of {{ images?.length }}</span>
	</div>

	<!-- add -->
	<div *ngIf="!static" class="btn add pointer visible-on-hover" (click)="openFileBrowser()" translate="button.add"></div>

	<!-- counter -->
	<div class="counter flexCenter">
		<div
			*ngFor="let image of images; index as i; trackBy: trackByFn"
			class="dot {{ i === selectedIndex ? 'full' : '' }}">
		</div>
	</div>


	<modal-carousel-app
		#modalCarousel
		[selectedIndex]="selectedIndex"
		[images]="images"
		[entity]="entity"
		(delete)="delete()"
		(openFileBrowser)="openFileBrowser()"
		(indexChange)="selectedIndex = $event">
	</modal-carousel-app>

	<!-- input used to input files -->
	<input *ngIf="!static" #inpFile [multiple]="isImagePropertyArray" type="file" accept="image/*" (fileSelect)="add($event)"/>

</div>

<image-previewer-2-app
	*ngIf="hasPreview && images.length > 0"
	[images]="images"
	(imageClick)="selectedIndex = $event">
</image-previewer-2-app>


