<div class="ctnr will-change-scroll" infiniScroll (bottomReached)="bottomReached.emit()" cdk-scrollable>

	<div class="contentCtnr">
		<!-- empty column for space between border bottom and side -->
		<div class="col emptyBorder">
			<div class="header"></div>
			<div class="cell" *ngFor="let row of rows; index as i; trackBy: trackByIdentify"
				[ngClass]="{ selected: (i === hoverIndex) || isSelected(row, i) }"
				(mouseenter)="hoverRow(i)" (mouseleave)="hoverRow(-1)"></div>
		</div>

		<!-- selection column -->
		<div class="col selectionCol" *ngIf="hasSelection">
			<div class="header">
				<ng-container *ngIf="!selectionDisabled">
					<checkbox-app [checked]="isAllSelected()" (check)="onSelectAll(rows)" (uncheck)="onUnselectAll()"></checkbox-app>
				</ng-container>
			</div>
			<ng-container *ngIf="!pending">
				<div class="cell"
					*ngFor="let row of rows; index as i; trackBy: trackByIdentify"
					[ngClass]="{ selected: (i === hoverIndex) || isSelected(row, i) }"
					(mouseenter)="hoverRow(i)" (mouseleave)="hoverRow(-1)">
					<checkbox-app
						*ngIf="isSelectable(row)"
						[checked]="selected.has(row[idName])"
						(check)="onSelectOne(row)"
						(uncheck)="onUnselectOne(row)">
					</checkbox-app>
				</div>
			</ng-container>
		</div>

		<!-- contextual menu -->
		<div class="col" *ngIf="hasMenu">
			<div class="header">
			</div>
			<ng-container *ngIf="!pending">
				<div
					*ngFor="let row of rows; index as i; trackBy: trackByIdentify"
					class="cell menuCell"
					[ngClass]="{ selected: (i === hoverIndex) || isSelected(row, i) }"
					(mouseenter)="hoverRow(i)"
					(mouseleave)="hoverRow(-1)">
					<context-menu-app
						*ngIf="isSelectable(row)"
						[ngClass]="{ hover: (i === hoverIndex) }"
						[ngStyle]="{ visibility: ((i === hoverIndex) || isSelected(row, i)) ? 'visible' : 'hidden' }"
						[closeOnScroll]="true">
						<context-menu-trigger-app>
							<icon-app class="color-txt-secondary" name="dots-vertical" size="18"></icon-app>
						</context-menu-trigger-app>
						<ng-container
							*ngTemplateOutlet="contextualMenu; context: { column: column, row: row }">
						</ng-container>
					</context-menu-app>
				</div>
			</ng-container>
		</div>


		<!-- content columns -->
		<div *ngFor="let column of columns; trackBy: columnTrackByFn" [style.width]="column.width + 'px'" [style.minWidth]="column.minWidth + 'px'"
			class="col {{ column.grows ? 'flexGrow' : '' }}">
			<!-- header -->
			<div class="header {{ column.sortable ? 'pointer' : 'defaultCursor'}}" (click)="onSort(column)">
				{{ column.title }}
				<ng-container *ngIf="column.sortOrder !== 'NONE'">
					<icon-app class="sortIcon fs-xs"  fontSet="fa" name="angle-down"
						*ngIf="column.sortOrder === 'DESC'; else upArrow;"></icon-app>
					<ng-template #upArrow>
						<icon-app  class="sortIcon fs-xs" fontSet="fa" name="angle-up"></icon-app>
					</ng-template>
				</ng-container>
			</div>

			<!-- cells -->
			<ng-container *ngIf="!pending">
				<div class="cell" *ngFor="let row of rows; index as i; trackBy: trackByIdentify"
					[ngClass]="{ selected: (i === hoverIndex) || isSelected(row, i), hover: (i === hoverIndex), main: (column.type === 'main') }"
					(mouseenter)="hoverRow(i)" (mouseleave)="hoverRow(-1)">
					<!-- ellipsis wrapper because ellipsis cannot be added to flex elements, and cell is flex -->
					<div class="full-width">
						<!-- Render the column template when specified -->
						<ng-container
							*ngTemplateOutlet="column.template; context: { column: column, row: row }">
						</ng-container>
					</div>
				</div>
			</ng-container>

		</div>

	</div>

	<div class="flexAround placeholderCtnr" *ngIf="rows?.length === 0">
		<div class="placeholder">{{ placeholder }}</div>
	</div>

	<!-- pending -->
	<div class="pendingCtnr flexCenter" *ngIf="pending">
		<dots-app></dots-app>
	</div>
</div>

	<!-- pagination controller -->
	<div *ngIf="rows" class="flexCenter pagination-ctrl">
		<icon-app [ngClass]="{ disabled: indexPagination === 0 }" fontSet="fa" name="angle-left" (click)="previousPage()"></icon-app>
		<span *ngFor="let sect of sections; index as index"
			class="pagination-item"
			[ngClass]="{ hide: isHidden(index), selected: index === indexPagination }"
			(click)="goToIndexPage(index)">
			{{ index  }}
		</span>
		<icon-app [ngClass]="{ disabled: indexPagination === (sections?.length - 1) }" fontSet="fa" name="angle-right" (click)="nextPage()"></icon-app>
		<!-- <span class="pagination-text">{{ skipped }} - {{ skipped + rows.length }} of {{ count }}</span> -->
	</div>
