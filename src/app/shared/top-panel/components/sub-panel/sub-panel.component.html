<h3 *ngIf="title" class="ms"> {{ title }} </h3>

<div class="flex">

	<div 
		class="search-container flex"
		[class.sub-panel-dlg-search-container]="subPanelDialog">
		<ng-content select="search-autocomplete-app"></ng-content>

		<search-bar-app
			*ngIf="hasSearch"
			[ngStyle]="subPanelDialog && {'width': '358px', 'max-width': 'unset'}"
			[formControl]="searchControl"
			[inputFocus]="inputFocus"
			searchType="short"
			[placeHolder]="'placeholder.type-to-search' | translate"
			(focus)="onFocusSearch($event)"
			(search)="search.emit($event)"
			(keydown.enter)="triggerSmartSearch($event)">
		</search-bar-app>

		<button
			*ngIf="hasFilter && !filtersPanelOpened && !subPanelDialog"
			class="bold-s pointer capitalize filter-button"
			(click)="showFilters.emit()" translate="button.show-filters">
		</button>
		<button
			*ngIf="hasFilter && !filtersPanelOpened && !subPanelDialog"
			class="bold-s pointer capitalize clear-filter-button"
			(click)="clearFilters.emit()"
			translate="button.clear-filters">
			<span *ngIf="filtersAmount">({{filtersAmount}})</span>
		</button>
		<div *ngIf="!subPanelDialog" class="divider"></div>

		<span class="bold-s capitalize entities-count" 
			[ngStyle]="subPanelDialog && {'margin-left': '24px'}">
			{{count}} {{entityType}}
		</span>

		
		<button
			*ngIf="!filtersPanelOpened && subPanelDialog" 
			class="bold-s pointer secondary capitalize"
			[class.dialog-show-filters]="subPanelDialog"
			(click)="showFilters.emit()" 
			i18n="text@@show-filters">Show Filters</button>

		<button 
			*ngIf="filtersPanelOpened && subPanelDialog" 
			class="bold-s pointer secondary capitalize"
			[class.dialog-hide-filters]="subPanelDialog"
			[ngStyle]="subPanelDialog && {'margin-left': '24px'}"
			(click)="hideFilters.emit()" 
			i18n="text@@show-filters">Hide Filters</button>

		<div *ngIf="subPanelDialog" class="created-by-me-container pointer" (click)="toggleMyProducts()">
			<div class="flexCenter">
				<checkbox-app
					[checked]="isMyProductsShown">
				</checkbox-app>
				<span>Show my products only</span>
			</div>
		</div>
		
		<button
			*ngIf="buttonName"
			class="create first-uppercase"
			(click)="buttonClick.emit()">
			<span class="first-uppercase">{{ buttonName }}</span>
		</button>
	</div>

	<div class="right-container flex">
		<ng-content select="[right-sort-elem]" *ngIf="view === 'card'"></ng-content>
		<div *ngIf="hasArchived" class="show-archived-container pointer" (click)="toggleArchived()">
			<div class="flexCenter">
				<checkbox-app
					[checked]="isArchivedShown"
					[size]="15">
				</checkbox-app>
				{{'label.show-archived' | translate}}
			</div>
		</div>
		<div
			*ngIf="hasTaskCreatedByMeOnly"
			class="tasks-created-by-me-container pointer"
			(click)="toggleCreatedTaskOnly()">
			<div class="flexCenter">
				<checkbox-app
					[checked]="isTaskCreatedByMeOnlyChecked"
					[size]="15">
				</checkbox-app>
				{{'label.show-tasks-i-created-only' | translate}}
			</div>
		</div>
		<div
			*ngIf="hasCompletedTask"
			class="show-completed-container pointer"
			(click)="toggleCompletedTask()">
			<div class="flexCenter">
				<checkbox-app
					[checked]="isCompletedTaskChecked"
					[size]="15">
				</checkbox-app>
				{{'label.show-completed' | translate}}
			</div>
		</div>
		<div class="assigned-to-me-container pointer" *ngIf="hasAssigned" (click)="toggleAssigned()">
			<div class="flexCenter">
				<checkbox-app
					[checked]="isAssigned"
					[size]="15">
				</checkbox-app>
				{{'label.assigned-to-me' | translate}}
			</div>
		</div>

		<button *ngIf="hasFilter && !filtersPanelOpened && hasExport" class="flexCenter bold-s pointer capitalize export-button"
			(click)="export.emit()" translate="button.export">
			<icon-app name="close-pane-bottom" size="m"></icon-app>
		</button>

		<view-switcher-app
			*ngIf="hasSwitch"
			[switchContent]="switchContent"
			[hasThumb]="hasThumb"
			[view]="view"
			(viewChange)="viewChange.emit($event)">
		</view-switcher-app>
	</div>

</div>
