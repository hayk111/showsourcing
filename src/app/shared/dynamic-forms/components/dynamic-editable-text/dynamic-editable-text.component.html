<ng-container [ngSwitch]="customField.type">


	<!-- default -->
	<!-- hint: field cell is used for almost every field, but options differs (packaging) -->
	<field-cell-app *ngSwitchDefault [hasBottom]="!isOpen" [inlineLabel]="inlineLabel">
		<label-app>{{ customField.label || customField.name }}</label-app>
		<!-- hint: editable text is the clickable label that transforms into an input -->
		<editable-text-app #editable (saved)="onSave()" (closed)="onSave()" (opened)="onOpen()">
			<editable-label-app>{{ customField.value || '-' }}</editable-label-app>
			<form-field-app>
				<input #inp
					inputApp
					autofocus="true"
					[value]="customField.value"
					(input)="accumulate(inp.value)"
					(keyup.enter)="editable.close();"
					[type]="customField.type"/>
			</form-field-app>
		</editable-text-app>
	</field-cell-app>

	<!-- tel (restricted input)-->
	<field-cell-app *ngSwitchCase="'tel'" [hasBottom]="!isOpen" [inlineLabel]="inlineLabel">
		<label-app>{{ customField.label || customField.name }}</label-app>
		<editable-text-app #editable (saved)="onSave()" (closed)="onSave()" (opened)="onOpen()">
			<editable-label-app>{{ customField.value || '-' }}</editable-label-app>
			<form-field-app>
				<input inputApp
					#inp
					restrictInput="tel"
					autofocus="true"
					[value]="customField.value"
					(input)="accumulate(inp.value)"
					(keyup.enter)="editable.close();"
					[type]="customField.type"/>
			</form-field-app>
		</editable-text-app>
	</field-cell-app>

	<!-- number -->
	<field-cell-app *ngSwitchCase="'number'" [hasBottom]="!isOpen" [inlineLabel]="inlineLabel">
		<label-app>{{ customField.label || customField.name }}</label-app>
		<editable-text-app #editable (saved)="onSave()" (closed)="onSave()" (opened)="onOpen()">
			<editable-label-app>{{ customField.value || '-' }}</editable-label-app>
			<form-field-app>
				<input inputApp
					#inp
					restrictInput="number"
					autofocus="true"
					[value]="customField.value"
					(input)="accumulate(+inp.value)"
					(keyup.enter)="editable.close();"
					[type]="customField.type"/>
			</form-field-app>
		</editable-text-app>
	</field-cell-app>


	<!-- decimal -->
	<field-cell-app *ngSwitchCase="'decimal'" [hasBottom]="!isOpen" [inlineLabel]="inlineLabel">
		<label-app>{{ customField.label || customField.name }}</label-app>
		<editable-text-app #editable (saved)="onSave()" (closed)="onSave()" (opened)="onOpen()">
			<editable-label-app>{{ customField.value || '-' }}</editable-label-app>
			<form-field-app>
				<input inputApp
					#inp
					restrictInput="decimal"
					autofocus="true"
					[value]="customField.value"
					(input)="accumulate(+inp.value)"
					(keyup.enter)="editable.close();"
					[type]="customField.type"/>
			</form-field-app>
		</editable-text-app>
	</field-cell-app>



	<!-- days -->
	<field-cell-app *ngSwitchCase="'days'" [hasBottom]="!isOpen" [inlineLabel]="inlineLabel">
		<label-app>{{ customField.label || customField.name }}</label-app>
		<editable-text-app #editable (saved)="onSave()" (closed)="onSave()" (opened)="onOpen()">
			<editable-label-app>{{ customField.value || '-' }} days</editable-label-app>
			<form-field-app>
				<input inputApp
					#inp
					autofocus="true"
					[value]="customField.value"
					(input)="accumulate(+inp.value)"
					(keyup.enter)="editable.close();"
					[type]="'number'"/>
			</form-field-app>
		</editable-text-app>
	</field-cell-app>


	<!-- textarea -->
	<field-cell-app *ngSwitchCase="'textarea'" [hasBottom]="!isOpen" [inlineLabel]="inlineLabel">
		<label-app>{{ customField.label || customField.name }}</label-app>
		<editable-text-app #editable (saved)="onSave()" (closed)="onSave()" (opened)="onOpen()">
			<editable-label-app style="white-space: pre-wrap">{{ customField.value || '-' }}</editable-label-app>
			<form-field-app>
				<textarea inputApp
					#inp
					autofocus="true"
					[value]="customField.value"
					(input)="accumulate(inp.value)">
				</textarea>
			</form-field-app>
		</editable-text-app>
	</field-cell-app>

	<field-cell-app *ngSwitchCase="'yesNo'">
		<label-app>{{ customField.label || customField.name }}</label-app>
		<span class="txtBtn" (click)="toggleValue()">{{ value ? 'Yes' : 'No' }}</span>
	</field-cell-app>

	<!-- price matrix -->
	<ng-container *ngSwitchCase="'priceMatrix'">
		<label>{{ customField.label || customField.name }}</label>
		<div class="inputCtnr">
			<editable-price-matrix-app [value]="value"
				(change)="onChange()" (blur)="onBlur()"></editable-price-matrix-app>
		</div>
	</ng-container>

	<!-- packaging -->
	<ng-container *ngSwitchCase="'packaging'">
		<label>{{ customField.label || customField.name }}</label>
		<div class="inputCtnr">
			<!-- length -->
			<field-cell-app #cell1 [inlineLabel]="true">
				<label-app>length</label-app>
				<editable-text-app #editable1 (saved)="onSave()"
					(closed)="onSave(); cell1.hasBottom = true" (opened)="onOpen(); cell1.hasBottom = false">
					<editable-label-app>{{ customField?.value?.length || '-' }}</editable-label-app>
					<form-field-app>
						<input inputApp
							#inp1
							restrictInput="number"
							autofocus="true"
							[value]="customField?.value?.length"
							(input)="accumulateNested('length', +inp1.value)"
							(keyup.enter)="editable1.close();"
							[type]="'number'"/>
					</form-field-app>
				</editable-text-app>
			</field-cell-app>

			<!-- width -->
			<field-cell-app #cell2 [inlineLabel]="true">
				<label-app>width</label-app>
				<editable-text-app #editable2 (saved)="onSave()"
					(closed)="onSave(); cell2.hasBottom = true" (opened)="onOpen(); cell2.hasBottom = false">
					<editable-label-app>{{ customField?.value?.width || '-' }}</editable-label-app>
					<form-field-app>
						<input inputApp
							#inp2
							restrictInput="number"
							autofocus="true"
							[value]="customField?.value?.width"
							(input)="accumulateNested('width', +inp2.value)"
							(keyup.enter)="editable2.close();"
							[type]="'number'"/>
					</form-field-app>
				</editable-text-app>
			</field-cell-app>

			<!-- height -->
			<field-cell-app #cell3 [inlineLabel]="true">
				<label-app>height</label-app>
				<editable-text-app #editable3 (saved)="onSave()"
					(closed)="onSave(); cell3.hasBottom = true" (opened)="onOpen(); cell3.hasBottom = false">
					<editable-label-app>{{ customField?.value?.height || '-' }}</editable-label-app>
					<form-field-app>
							<input inputApp
								#inp3
								restrictInput="number"
								autofocus="true"
								[value]="customField?.value?.height"
								(input)="accumulateNested('height', +inp3.value)"
								(keyup.enter)="editable3.close();"
								[type]="'number'"/>
					</form-field-app>
				</editable-text-app>
			</field-cell-app>

			<!-- units -->
			<field-cell-app #cell4 [inlineLabel]="true">
				<label-app>units</label-app>
				<editable-text-app #editable4 (saved)="onSave()"
					(closed)="onSave(); cell4.hasBottom = true" (opened)="onOpen(); cell4.hasBottom = false">
					<editable-label-app>{{ customField?.value?.unit || '-' }}</editable-label-app>
					<selector-const-app class="rightSelector" [type]="'length'" [(ngModel)]="value.unit"></selector-const-app>
				</editable-text-app>
			</field-cell-app>

		</div>


	</ng-container>

	<!-- price -->
	<field-cell-app *ngSwitchCase="'price'" [hasBottom]="!isOpen" [inlineLabel]="inlineLabel">
		<label-app>{{ customField.label || customField.name }}</label-app>
		<div class="flexBetween editablePrice">
			<!-- value -->
			<editable-text-app #editable1 (saved)="onSave()" (closed)="onSave()" (opened)="onOpen()">
				<editable-label-app>
					<span>{{ customField.value.currency | const:'currency':'symbol'}} </span>
					<span>{{ customField.value?.value || '-' }}</span>
				</editable-label-app>
				<input #inp (keyup.enter)="editable1.close();"
					(input)="accumulateNested('value', +inp.value)" type="text" restrictInput="decimal"
					[value]="customField.value.value"/>
			</editable-text-app>
			<!-- currency -->
			<editable-text-app class="editableCurrency" [hasAction]="false" (opened)="onOpen()" (closed)="onClose()" #editable>
				<editable-label-app>
					<span class="currencyLabel">
						{{ customField.value.currency | const:'currency':'symbol' }}
					</span>
				</editable-label-app>
				<selector-const-app
					#selector
					class="rightSelector"
					[multiple]="false"
					[(ngModel)]="value.currency"
					[type]="'currency'"
					(change)="onSelectorChange()">
				</selector-const-app>

			</editable-text-app>
		</div>
	</field-cell-app>




	<!-- selector -->
	<field-cell-app *ngSwitchCase="'selector'" [hasBottom]="!isOpen" [inlineLabel]="inlineLabel">
		<label-app>{{ customField.label || customField.name }}</label-app>
		<!-- entity selector -->
		<ng-container *ngIf="customField.metadata.type === 'entity'">
			<editable-text-app #editable
				(closed)="onClose()" [hasAction]="false" (opened)="onOpen()">
				<!-- multiple value label -->
				<editable-label-app *ngIf="customField.multiple; else solo">
					<tag-list-app  *ngIf="!isEmpty(customField.value); else none" [value]="value"></tag-list-app>
					<ng-template #none>
						-
					</ng-template>
				</editable-label-app>
				<!-- one value label -->
				<ng-template #solo>
					<editable-label-app class="flexCenter">
						<img class="selectorIcon"
							*ngIf="value | logo:customField.metadata.target"
							[src]="value | logo:customField.metadata.target" />
						<ng-container [ngSwitch]="customField.metadata.target">
							<span *ngSwitchDefault>{{ value ? value[customField.metadata.labelName] : '-' }}</span>
						</ng-container>

					</editable-label-app>
				</ng-template>

				<selector-entity-app
					#selector
					[multiple]="customField.multiple"
					(change)="onSelectorChange()"
					[(ngModel)]="value"
					[type]="customField.metadata.target"
					[canCreate]="customField.metadata.canCreate"
					[propertyName]="customField.metadata.labelName">
				</selector-entity-app>
			</editable-text-app>

		</ng-container>

		<!-- const selector -->
		<ng-container *ngIf="customField.metadata.type === 'const'">
			<!-- one -->
			<editable-text-app #editable *ngIf="!customField.multiple"
				(closed)="onClose()" [hasAction]="false" (opened)="onOpen()">

				<editable-label-app>
					{{ value || '-'}}
				</editable-label-app>

				<selector-const-app
					#selector
					[multiple]="false"
					(change)="onSelectorChange()"
					[(ngModel)]="value"
					[type]="customField.metadata.target">
				</selector-const-app>
			</editable-text-app>

		</ng-container>
	</field-cell-app>

</ng-container>

