<div class="flexStart row">
	<!-- name -->
	<div class="flex task-name ellipsis pointer">
		<icon-app class="pointer" [ngClass]="{'color-success': task?.done, 'color-secondary': !task?.done}" [name]="task?.done ? 'check-round' : 'check-empty-round'" (click)="toggleDoneStatus()"></icon-app>
		<div class="flexCenter" [ngStyle]="{'text-decoration': task?.done ? 'line-through' : 'none'}" (click)="previewClicked.emit(task)">{{ task?.name || 'Unnamed task' }}</div>
	</div>

	<!-- if product -->
	<div *ngIf="hasProduct" class="flexStart task-product ellipsis">
		<div *ngIf="task?.product" class="flex ellipsis" (click)="openProduct.emit(task?.product?.id || null)">
			<img-app [size]="'xs'" [image]="task?.product?.images"></img-app>
			{{ task?.product?.name || 'Unnamed product' }}
		</div>
	</div>

	<!-- if supplier -->
	<div *ngIf="hasSupplier" class="flexStart task-supplier ellipsis">
		<div *ngIf="task?.supplier" class="flex ellipsis" (click)="openSupplier.emit(task?.supplier?.id || null)">
			<img-app [size]="'xs'" [image]="task?.supplier?.logoImage"></img-app>
			{{ task?.supplier?.name || 'Unnamed suppler' }}
		</div>
	</div>

	<!-- user+name column -->
	<div *ngIf="fullUser"
		class="flex task-user"
		cdkOverlayOrigin
		#trigger="cdkOverlayOrigin"
		(click)="toggleMenu()">
		<!-- DONT ERASE THIS IN CASE THE TASK MENU != TASK WORKSPACE -->
		<!-- we call 2 times the selctor method since it has 2 different styling offsets -->
		<user-picture-app [user]="task?.assignee" [size]="20" [border]="true"></user-picture-app>
		<span>{{ task?.assignee?.firstName }} {{ task?.assignee?.lastName }}</span>
		<cdk-overlay-app
			*ngIf="menuOpen && fullUser"
			[trigger]="trigger"
			[isOpen]="menuOpen"
			[offsetY]="-22"
			(clickOutside)="closeMenu()">
			<selector-entity-app
				#selector
				style="width: 200px;"
				type="user"
				(clickOutside)="closeMenu()"
				(change)="updateAssignee($event)">
			</selector-entity-app>
		</cdk-overlay-app>
	</div>

	<!-- task status -->
	<div class="flexEnd task-user-status"
		cdkOverlayOrigin
		#trigger="cdkOverlayOrigin">
		<user-picture-app
			*ngIf="!fullUser"
			[user]="task?.assignee"	[size]="20"	[border]="true"
			(click)="toggleMenu()">
		</user-picture-app>
		<cdk-overlay-app
			*ngIf="!fullUser && menuOpen"
			[trigger]="trigger"
			[isOpen]="menuOpen"
			[offsetY]="-22"
			(clickOutside)="closeMenu()">
			<selector-entity-app
				#selector
				style="width: 230px;"
				type="user"
				(clickOutside)="closeMenu()"
				(change)="updateAssignee($event)">
			</selector-entity-app>
		</cdk-overlay-app>
		<div class="flex task-status"
			[ngClass]="{'task-done': getStatus === 'done', 'task-overdue': getStatus === 'overdue', 'task-pending': getStatus === 'pending'}"
			(click)="toggleDoneStatus()">
			<icon-app name="circle" fontSet="fa" color="red"></icon-app>
			<p>{{ getStatus }}</p>
		</div>
	</div>
</div>