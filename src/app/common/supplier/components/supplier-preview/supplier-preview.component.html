<preview-app *ngIf="supplier$ | async" [ngClass]="isRelative ? 'relative' : ''" cdk-scrollable
	[align]="isRelative ? 'left' : 'right'" [isFixed]="isFixed">

		<!-- Banner -->
		<preview-banner-app
			[canOpen]="canClose"
			[canClose]="canClose"
			(closed)="close.emit()"
			(opened)="openSupplier()">
			<preview-carousel-app
				[entity]="supplier"
				[entityMD]="erm.SUPPLIER"
				[images]="supplier?.images"
				objectFit="cover">
			</preview-carousel-app>
		</preview-banner-app>

		<!-- Header -->
		<preview-header-app
			[entity]="supplier"
			[entityMD]="erm.SUPPLIER"
			[supplier]="supplier"
			[logoImage]="supplier?.logoImage"
			[hasTop]="!isRelative"
			(update)="update($event, 'name')">

		<!-- Supplier type badge -->
		<preview-badge-app
			[badge]="erm.SUPPLIER_TYPE"
			[value]="supplier?.supplierType?.name | const: 'supplierType'"
			(update)="update($event, 'supplierType')">
		</preview-badge-app>

		<!-- Location badge -->
		<preview-badge-app
			[badge]="erm.LOCATION"
			[value]="getLocationName(supplier)"
			(update)="update($event, 'country')">
		</preview-badge-app>

		<!-- Categories badge -->
		<preview-badge-app
			[badge]="erm.CATEGORY"
			[multiple]="true"
			[value]="supplier?.categories"
			(update)="update($event, 'categories')">
			<divider-app></divider-app>
		</preview-badge-app>
	</preview-header-app>

	<!-- Description -->
	<preview-section-app [title]="'description'" i18n-title="@@description">
		<input-description-app
			[description]="supplier?.description"
			(update)="update($event, 'description')">
		</input-description-app>
	</preview-section-app>

	<!-- Tags -->
	<preview-section-app [title]="'Tags'">
		<input-badge-selector-app
			[value]="supplier?.tags"
			type="tag"
			(change)="update($event, 'tags')">
		</input-badge-selector-app>
	</preview-section-app>

	<!-- Supplier Details -->
	<preview-section-app [title]="'Supplier Details'">
		<dynamic-form-app
			[fields]="customFields"
			[inlineLabel]="true"
			[value]="supplier"
			[colAmount]="1"
			(update)="updateSupplier($event)">
		</dynamic-form-app>
	</preview-section-app>


	<!-- Extended Fields -->
	<!-- <preview-section-app *ngIf="(fieldDefinitions$ | async)?.length" [title]="'Extended Fields'">
		<extended-form-app
			[inlineLabel]="true"
			[definitions]="fieldDefinitions$ | async"
			[fields]="supplier?.extendedFields"
			(update)="updateSupplier({extendedFields: $event})">
		</extended-form-app>
	</preview-section-app> -->

	<!-- Activity -->
	<preview-section-app *ngIf="!isRelative && supplier?.comments?.length" [title]="'Comments'">
		<comment-list-app [comments]="supplier.comments"></comment-list-app>
	</preview-section-app>

	<preview-comment-app *ngIf="!isRelative" (added)="addComment($event)"></preview-comment-app>

	<!-- Info -->
	<preview-section-app *ngIf="isRelative && !isFixed" [title]="'Info'"  class="no-mg-bottom">
		<div class="flexColumn">
			<span class="color-txt-strong">Created by {{ supplier?.createdBy | formatUserName: true }} on {{ supplier?.creationDate | date: 'dd MMMM yyyy' }}</span>
			<span class="color-txt-strong">Last updated by {{ supplier?.lastUpdatedBy | formatUserName: true }} on {{ (supplier?.lastUpdatedDate || product?.creationDate) | date: 'dd MMMM yyyy' }}</span>
		</div>
	</preview-section-app>

</preview-app>