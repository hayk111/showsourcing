<table-app
	[rows]="rows"
	[pending]="pending"
	[selected]="selection"
	[contextualMenu]="contextualMenuTemplate"
	[count]="count"
	[currentPage]="currentPage"
	[placeholder]="'placeholder.no-sample' | translate"
	(goToPage)="goToPage.emit($event)"
	(selectOne)="select.emit($event)"
	(unselectOne)="unselect.emit($event)"
	(selectAll)="selectAll.emit($event)"
	(unselectAll)="unselectAll.emit($event)"
	(sort)="sort.emit($event)"
	(bottomReached)="bottomReached.emit()">

	<!-- contextual menu -->
	<ng-template #contextualMenuTemplate let-row="row">
		<context-menu-item-app
			class="pointer flexCenter"
			(click)="delete.emit(row)">
			{{'text.delete' | translate}}
		</context-menu-item-app>
	</ng-template>
	
	  <!-- dynamic columns -->
		<ng-template 
    *ngFor="let column of columnsConfig; trackBy: trackByFn" 
    let-row="row" 
    [columnApp]="'title.' + column.translationKey | translate"
    [width]="column.width"
		[sortBy]="column.sortProperty">
		
    <ng-container [ngSwitch]="column.title">
			<!-- name -->
			<ng-container *ngSwitchCase="'name'">
				<div class="mainCellWrapper name-container ellipsis">
					<div class="mainCell">
						<img-app [image]="row?.images ? row?.images[0] : null" type="sample" size="s"></img-app>
						<span class="ellipsis pointer txt-btn" (click)="previewClick.emit(row)">{{ row?.name }}</span>
					</div>
					<div class="preview">
						<button class="secondary-dark small" (click)="previewClick.emit(row)" translate="button.preview"></button>
					</div>
				</div>
			</ng-container>

			<!-- assignee -->
			<ng-container *ngSwitchCase="'assignee'">
				<div class="flex assignee-container ellipsis">
					<user-picture-app	[user]="row?.assignee" size="24" [border]="true"></user-picture-app>
					{{ row?.assignee | formatUserName }}
				</div>
			</ng-container>

			<!-- product -->
			<ng-container *ngSwitchCase="'product'">
				<div *ngIf="row?.product" class="pointer ellipsis" (click)="openProduct.emit(row?.product?.id)">{{ row?.product?.name }}</div>
			</ng-container>

			<!-- supplier -->
			<ng-container *ngSwitchCase="'supplier'">
				<div *ngIf="row?.supplier" class="pointer ellipsis" (click)="openSupplier.emit(row.supplier.id)">{{ row?.supplier?.name }}</div>
			</ng-container>

			<!-- comments -->
			<ng-container *ngSwitchCase="'comments'">
				<div class="flex ellipsis">
					<div class="number">{{ row?.comments?.length || '0' }}</div>
					&nbsp;
					{{ ((row?.comments?.length || 0) > 1 ? 'OBJ.comment.plural' : 'OBJ.comment.singular') | translate }}
				</div>
			</ng-container>

			<!-- status -->
				<ng-container *ngSwitchCase="'status'">
				<status-selector-app
					[entity]="row"
					[typeEntity]="erm.SAMPLE">
				</status-selector-app>
			</ng-container>

			<!-- created on -->
			<ng-container *ngSwitchCase="'created on'">
				{{ row?.creationDate | date: 'dd MMMM y':'':translate.currentLang }}
			</ng-container>
		</ng-container>
	</ng-template>

</table-app>