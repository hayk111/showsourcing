<div class="card-container" [class.selected-card]="selected">
	<img-app
		[image]="product?.images"
		objectFit="cover"
		size="xl">
	</img-app>

	<div class="product-price" *ngIf="product?.price">
		<div class="price-dislayed">{{ product?.price | appPrice }}</div>
	</div>

	<!-- Floating Elements -->
	<!-- anything that floats needs the overlay class -->
	<div class="black-hover">
	</div>

	<checkbox-app
		*ngIf="hasCheckbox"
		class="overlay"
		[ngClass]="{'full-opacity': selected}"
		[checked]="selected"
		(check)="select.emit()"
		(uncheck)="unselect.emit()">
	</checkbox-app>

	<div class="flex icons-container">
		<selector-app
			class="selector"
			type="project"
			[value]="product?.projects"
			[canCreate]="true"
			[offsetY]="8"
			[offsetX]="316"
			[multiple]="true"
			[width]="330"
			(update)="update.emit({id: product?.id, projects: $event})">
			<icon-app class="folder overlay-icons pointer" name="folder-line"></icon-app>
		</selector-app>
		<thumb-buttons-app
			class="thumb-up overlay-icons"
			[lineStyle]="true"
			[votes]="product?.votes"
			(liked)="liked.emit()"
			(disliked)="disliked.emit()">
		</thumb-buttons-app>
		<rating-heart-app
			class="heart"
			[favorite]="product?.favorite"
			[lineStyle]="true"
			(favorited)="favorited.emit()"
			(unfavorited)="unfavorited.emit()">
		</rating-heart-app>
	</div>

	<button class="preview overlay capitalize" (click)="preview.emit()" i18n="@@preview">
		<icon-app class="eye-icon" name="eye"></icon-app> preview product
	</button>
	<button class="open overlay capitalize" (click)="open.emit()" i18n="@@open">
		<icon-app class="export-icon" name="export"></icon-app> open product
	</button>

	<!-- Content (Non Floating) -->
	<div class="content">
		<div class="title ellipsis">
			<div class="badge" *ngIf="product?.status; else noStatus" 
				[ngStyle]="{ 'background-color': 'var(' + getColor(product.status.category) + ')'}"></div>
			<ng-template #noStatus><div class="badge"></div></ng-template> 
			{{ product?.name || ('Unnamed product' | const: 'messages') }} </div>
		<div class="category ellipsis flexVAlign">
			{{ product?.category?.name }}
			<span class="small-badge-gray" *ngIf="product?.supplier"></span> 
			{{ product?.supplier?.name }}
		</div>

		<product-card-activities-app
			[favourite]="product?.favorite"
			[hasSamples]="!!product?.samplesLinked?.count"
			[hasTasks]="!!product?.tasksLinked?.count"
			[hasComments]="!!product?.comments.length"
			[votes]="product?.votes"
		></product-card-activities-app>
	</div>

</div>

