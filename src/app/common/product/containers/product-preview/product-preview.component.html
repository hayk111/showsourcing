<side-panel-app>
	<side-panel-title-app>
		{{ product.name }}
	</side-panel-title-app>

	<side-panel-action-app>
		<icon-app class="close pointer color-txt-secondary" name="close" (click)="close.emit()"></icon-app>
	</side-panel-action-app>

	<ng-container *ngIf="product$ | async as productF">
		<carousel-app [images]="product?.images"></carousel-app>

		<status-selector-app
			class="card-flow"
			[entity]="productF"
			selectSize="s"
			[typeEntity]="prodERM">
		</status-selector-app>

		<action-bar-app
			buttonName="Open"
			[votes]="product?.votes"
			[favorite]="productF?.favorite"
			(onFavorite)="updateProduct({ favorite: true })"
			(onUnfavorite)="updateProduct({ favorite: false })"
			(liked)="onThumbUp(productF)"
			(disliked)="onThumbDown(productF)"
			(buttonClick)="onViewProduct()">

			<button class="icon light folder" (click)="openAddToProject()">
				<icon-app fontSet="svg" name="folder-light" size="m" ></icon-app>
			</button>
		</action-bar-app>

		<!-- actions -->
		<div class="flexColumn actions">
			<ng-container *ngIf="productF?.status?.status; else sendWF">
				Request RFQ to supplier?
				<button class="primary" (click)="openRfq()">SEND RFQ</button>
			</ng-container>
			<ng-template #sendWF>
				This product is still a new idea, what should we do next?
				<div class="flexColumn card-hover-block">
					<!-- <div class="secondary flexBetween sort-1 button-action button-archive">
						<span class="button-label flexCenter" (click)="onArchive(product)">Keep as reference</span>
						<div class="button-icon">
							<context-menu-app #archiveMenu>
								<context-menu-trigger-app class="archieve-trigger flexCenter">
									<icon-app fontSet="fa" name="caret-down"></icon-app>
								</context-menu-trigger-app>
								<context-menu-item-app (click)="onArchive(product)" class="menu-item">
									Archive Product
								</context-menu-item-app>
								<context-menu-item-app (click)="delete.emit(product)" class="menu-item">
									Delete Product
								</context-menu-item-app>
							</context-menu-app>
						</div>
					</div> -->

					<div class="secondary flexBetween sort-1 button-action button-workflow">
						<div class="send-workflow flexCenter" (click)="onSentToWorkflow(product)">Send to {{ (firstStatus$ | async)?.name ? ((firstStatus$ | async)?.name | const: 'status') : 'workflow' }}</div>
						<div class="button-icon">
							<status-selector-app
								#workActionMenu
								[entity]="product"
								selectSize="s"
								[typeEntity]="prodERM"
								[isSendToWorkFlow]="true"
								[internalUpdate]="false"
								(statusUpdated)="onStatusUpdated(product, $event)">
							</status-selector-app>
						</div>
					</div>
				</div>
			</ng-template>
		</div>
		<divider-app></divider-app>

		<!-- form -->
		<h3>Product Details</h3>
		<dynamic-form-app
			[inlineLabel]="true"
			[fields]="customFields"
			[value]="productF"
			[colAmount]="1"
			(update)="updateProduct($event)">
		</dynamic-form-app>

		<h3 style="margin-top: 22px; margin-bottom: 18px">
			Trading information
		</h3>
		<dynamic-form-app
			[inlineLabel]="true"
			[fields]="customFields2"
			[value]="productF"
			[colAmount]="1"
			(update)="updateProduct($event)">
		</dynamic-form-app>
	</ng-container>



	<ng-template #spinner>
		<spinner-app></spinner-app>
	</ng-template>
</side-panel-app>