<preview-app cdk-scrollable *ngIf="product$ | async">
	<!-- Banner -->
	<preview-banner-app [canOpen]="true" (closed)="close.emit()" (opened)="openProduct()">
		<preview-carousel-app
			[entity]="product"
			[entityMD]="erm.SUPPLIER"
			[images]="product?.images"
			objectFit="cover">
		</preview-carousel-app>
	</preview-banner-app>

	<!-- Header -->
	<preview-header-app [entityMD]="erm.PRODUCT" [entity]="product" (update)="update($event, 'name')"
		(statusUpdated)="statusUpdated.emit($event)">

		<!-- Price -->
		<price-with-quantity-app *ngIf="product?.price?.value" [product]="product"
			(updateField)="update($event.newValue,  $event.field)">
		</price-with-quantity-app>

		<!-- Badge supplier -->
		<preview-badge-app
			[hasOpenAction]="true"
			[badge]="erm.SUPPLIER"
			[value]="product?.supplier?.name"
			(openActionClicked)="openSupplier()"
			(update)="update($event, 'supplier')">
		</preview-badge-app>

		<!-- Badge category -->
		<preview-badge-app
			[badge]="erm.CATEGORY"
			[value]="product?.category"
			(update)="update($event, 'category')">
		</preview-badge-app>

		<!-- Badge event -->
		<preview-badge-app
			[badge]="erm.EVENT"
			[value]="product?.event"
			(update)="update($event, 'event')">
		</preview-badge-app>

	</preview-header-app>

	<!-- Ask for a quote (disabled temporarily)-->
	<preview-section-app>
		<!-- <button class="btn-ask-quote" (click)="openRfq()">Ask for a Quote</button> -->
		<!-- <div class="centered-text text-ask-quote">Ask for a quote from the supplier</div> -->
		<button-action-list-app
			[actions]="actions"
			(clickOnAction)="clickOnAction($event)">
		</button-action-list-app>

		<divider-app></divider-app>

	</preview-section-app>

	<!-- Description -->
	<preview-section-app [title]="'Description'">
		<input-description-app
			[description]="product?.description"
			(update)="update($event, 'description')">
		</input-description-app>
	</preview-section-app>

	<!-- Tags -->
	<preview-section-app [title]="'Tags'">
		<input-badge-selector-app
			[value]="product?.tags"
			type="tag"
			(change)="update($event, 'tags')">
		</input-badge-selector-app>
	</preview-section-app>

	<!-- Product details -->
	<preview-section-app [title]="'Product Details'">
		<dynamic-form-app
			[inlineLabel]="true"
			[fields]="customFields"
			[value]="product"
			[colAmount]="1"
			(update)="updateProduct($event)">
		</dynamic-form-app>
	</preview-section-app>

	<!-- Trading information -->
	<preview-section-app [title]="'Trading Information'">
		<dynamic-form-app
			[inlineLabel]="true"
			[fields]="customFields2"
			[value]="product"
			[colAmount]="1"
			(update)="updateProduct($event)">
		</dynamic-form-app>
	</preview-section-app>

	<!-- Extended Fields -->
	<preview-section-app [title]="'Extended Fields'">
		<extended-form-app
			inlineLabel="true"
			[definitions]="fieldDefinitions$ | async"
			[fields]="product.extendedFields"
			(update)="updateProduct($event)">
		</extended-form-app>
	</preview-section-app>


	<!-- Activity -->
	<preview-section-app>
		<comment-list-app [comments]="product?.comments"></comment-list-app>
	</preview-section-app>

	<preview-comment-app (added)="addComment($event)"></preview-comment-app>

	<input #inpFile multiple="true" type="file" accept="image/*" (fileSelect)="add($event)" />
</preview-app>

<ng-template #spinner>
	<spinner-app></spinner-app>
</ng-template>