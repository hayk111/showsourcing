
<dialog-app>
  <!-- header -->
  <dialog-header-app class="flex">
    <div class="flex move">
      <icon-app name="arrow-left-thin" (click)="back()"></icon-app>
      <span class="spacer"></span>
      <icon-app name="arrow-right-thin" (click)="next()"></icon-app>
    </div>

    <div class="title">
      <h2>{{ element.name }}</h2>
      <span class="color-primary fs-m">{{ selectedIndex + 1 }} / {{ elements.length }} Products</span>
    </div>

  </dialog-header-app>

  <!-- content -->
  <div class="flex">

    <!-- left -->
    <div class="left">
      <h3 class="ms">Product images</h3>
      <carousel-app [hasPreview]="true" [static]="true" [images]="element.images"></carousel-app>
      <span class="spacer mg-ms"></span>
      <h3 class="ms">Product attachments</h3>
      <file-list-app [hasPlaceholder]="false" [static]="true" [files]="element.attachments"></file-list-app>
    </div>

    <!-- right -->
    <div class="right">

			<div class="info-banner flexCenter">
				Please fill in the form below to reply to client
			</div>

      <!-- details -->
      <h3 class="ms">Product details</h3>

      <extended-form-app
        (update)="update($event)"
        [disabled]="true"
        [definitions]="definitions"
        [isFormStyle]="true"
        [colAmount]="2"
        [fields]="fields">
      </extended-form-app>

      <!-- images -->
      <h3 class="ms">Images</h3>
			<image-previewer-2-app [isDeletable]="true" [size]="120" [images]="images" (imageClick)="modal.open($event)"></image-previewer-2-app>
			<modal-carousel-app
        #modal
        [images]="images">
      </modal-carousel-app>
      <div class="spacer mg-s" *ngIf="images.length > 0"></div>
      <button class="secondary add-image" (click)="inpImg.click()">Add Image</button>
			<input #inpImg multiple="true" type="file" accept="image/*" (fileSelect)="addImage($event)"/>

      <!-- attachments -->
      <h3 class="ms">Attachments</h3>
      <file-list-app 
        [showConfirmOnDelete]="false"
        [hasPlaceholder]="false" 
        [files]="files" 
        [linkedItem]="reply"></file-list-app>
      <div class="spacer mg-s" *ngIf="files.length > 0"></div>
      <button class="secondary add-attachment" (click)="inpFile.click()">Add Attachments</button>
      <input #inpFile multiple="true" type="file" (fileSelect)="addAttachment($event)"/>


    </div>

  </div>

  <!-- footer -->
  <dialog-footer-app>
	<button class="secondary save" [disabled]="hasEmptyField()" (click)="saveAndClose()">Save</button>
	<div toolTip [toolTipMessage]="hasEmptyField() ? 'All fields must be filled first' : null" toolTipPosition="above-right">
		<button *ngIf="hasNext()" [disabled]="hasEmptyField()" (click)="saveAndNext()">Submit & next</button>
	</div>
  </dialog-footer-app>

</dialog-app>
