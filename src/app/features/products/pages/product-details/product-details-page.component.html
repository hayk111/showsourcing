
<ng-container *ngIf="product$ | async as product; else spinner">
	<product-header-details-app
		[product]="product"
		(update)="updateProduct($event)"
		(export)="dlgCommonSrv.openExportDialog([$event])"
		(delete)="deleteProduct($event)"
		(archive)="onArchive($event)"
		(supplierRequest)="openSupplierRequest($event)">
	</product-header-details-app>

	<product-sub-header-details-app
		[product]="product"
		(updated)="updateProduct($event)"
		(redirect)="redirect($event)"
		(scrollToRating)="docket?.rating?.nativeElement?.scrollIntoView({ behavior: 'smooth' })">
	</product-sub-header-details-app>

	<div class="flex ctnr">
		<div class="left">
			<product-docket-app
				#docket
				[product]="product"
				(update)="updateProduct($event)"
				(addTask)="dlgCommonSrv.openCreationTaskDlg(product)"
				(addSample)="dlgCommonSrv.openCreationSampleDialog(product)"
				(previewSample)="openSamplePreview($event)"
				(previewTask)="openTaskPreview($event)"
				(openProject)="openProjectDetails($event)"
				(openVotes)="dlgCommonSrv.openVoteDetailsDialog($event)">
			</product-docket-app>
		</div>
		<product-main-app #main class="right"></product-main-app>
	</div>
</ng-container>

<ng-template #spinner>
	<div class="spinner-ctnr flexCenter">
		<spinner-app></spinner-app>
	</div>
</ng-template>

<sample-preview-app
	*ngIf="previewOpened && sample"
	[sample]="sample"
	(close)="closePreview()">
</sample-preview-app>

<task-preview-app
	*ngIf="previewOpened && task"
	[task]="task"
	(close)="closePreview()">
</task-preview-app>
