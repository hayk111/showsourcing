
<ng-template #fields let-field="field" let-product="product">
	<editable-field-app
		*ngIf="isEntityType(field.propType)"
		[value]="product[field.propName]"
		[entity]="product"
		[entities]="field.propType | entityList"
		[type]="field.propType"
		(update)="onUpdate(product.id, field.propName, $event)">
	</editable-field-app>
	<editable-field-app
		*ngIf="!isEntityType(field.propType)"
		[entity]="product"
		[value]="product[field.propName]"
		[type]="field.propType"
		(update)="onUpdate(product.id, field.propName, $event)">
	</editable-field-app>
</ng-template>

<div class="statusbar"></div>
<ng-container *ngIf="product$ | async as product">
	<ng-container *ngIf="customFields$ | async as cf">
		<ng-container *ngFor="let group of cf.groups">
			<div class="sectionTitle">{{ group.name }}</div>
			<div class="flexRow">
				<!-- first column -->
				<div class="flexColumn">
					<cell-two-row-app *ngFor="let field of getFirstCol(group.fields)" [title]="field.label">
						<ng-container  *ngTemplateOutlet="fields;  context: { field: field, product: product }"></ng-container>
					</cell-two-row-app>
				</div>

				<!-- second column -->
				<div class="flexColumn">
					<cell-two-row-app *ngFor="let field of getSecondCol(group.fields)" [title]="field.label">
						<ng-container  *ngTemplateOutlet="fields;  context: { field: field, product: product }"></ng-container>
					</cell-two-row-app>
				</div>

			</div>
		</ng-container>
	</ng-container>
</ng-container>

<!--
<ng-container *ngIf="product$ | async as product">
  <div class="sectionTitle shipping">Shipping & Trading</div>
  <div class="flexRow">
    <ng-container *ngIf="product.supplierId | entity: 'suppliers' | async as supplier">
      <div class="flexColumn">
        <cell-one-row-app title="Inco Term">
					<editable-field-app
						[value]="supplier.incoTerms"
						[type]="incoTerms"
						(update)="onUpdate(supplier.id, 'incoTerms', $event)">
					</editable-field-app>
        </cell-one-row-app>
        <cell-one-row-app title="Harbour">
					<editable-field-app
						[value]="supplier.harbour"
						[type]="harbours"
						(update)="onUpdate(supplier.id, 'harbour', $event)">
					</editable-field-app>
				</cell-one-row-app>
        <cell-one-row-app title="Inner Dimension">
					<editable-field-app
						[value]="product.innerDimensions"
						[type]="dimensions"
						(update)="onUpdate(product.id, 'innerDimensions', $event)">
					</editable-field-app>
				</cell-one-row-app>
        <cell-one-row-app title="Master Carton">
					<editable-field-app
						[value]="product.masterCarton"
						[type]="dimensions"
						(update)="onUpdate(product.id, 'masterCarton', $event)">
					</editable-field-app>
				</cell-one-row-app>
        <cell-one-row-app title="Pieces per Master">
					<editable-field-app
						[value]="product.piecePerMaster"
						[type]="number"
						(update)="onUpdate(product.id, 'piecePerMaster', $event)">
				</cell-one-row-app>
      </div>
      <div class="flexColumn">
        <cell-one-row-app title="1000 pcs">----</cell-one-row-app>
        <cell-one-row-app title="5000 pcs">----</cell-one-row-app>
        <cell-one-row-app title="10000 pcs">----</cell-one-row-app>
      </div>
    </ng-container>
  </div>
</ng-container>

-->
