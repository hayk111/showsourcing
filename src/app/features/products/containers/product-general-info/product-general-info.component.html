<card-app>
	<!-- product name -->
	<div class="mainTitle shipping flex"
		i18n="div title|Product general information@@productGeneralInfo_general">

		<editable-text-app #edt
			(closed)="updateProductProp($event, inpName.value, 'name')"
			(opened)="inpName.select()">
			<editable-label-app>
				{{ product?.name || 'Unnamed Product' }}
			</editable-label-app>
			<input inputApp type="text" #inpName [value]="product.name"
				(keyup.enter)="edt.close()">
		</editable-text-app>

		<icons-status-app
			class="flexCenter"
			[product]="product"
			[favorite]="product?.favorite"
			[onlyLike]="true"
			[hasPercent]="false">
		</icons-status-app>
	</div>

	<!-- price -->
	<editable-text-app #editablePrice class="price"
		*ngIf="product && product.price"
		(closed)="updateProductProp($event, inpPrice.price, 'price')"
		(opened)="inpPrice.select()"
		(saved)="updateProductProp(inpPrice.price, 'price')">
		<editable-label-app>

				<div *ngIf="product?.price?.value" class="amount">
					{{ priceAmount | currency: product?.price?.currency:'symbol':'1.2-2'}}
				</div>
				<div *ngIf="product?.price?.value" class="moq flexCenter">
					({{ 'Min ' + product?.minimumOrderQuantity + ' pcs' }}{{ product?.moqDescription ? ' ' + product?.moqDescription : ''}})
				</div>

		</editable-label-app>
		<input-price-app #inpPrice [price]="product?.price" (keyup.enter)="editablePrice.close()"></input-price-app>
	</editable-text-app>

	<!-- description -->
	<div class="description">
		<editable-field-app
			[canGrow]="true"
			(opened)="txt.select()"
			(closed)="updateProductProp($event, txt.value, 'description')">
			<label-app>Description</label-app>
			<editable-label-app>
				<span *ngIf="product?.description; else noDesc">{{ product.description }}</span>
				<ng-template #noDesc>
					<span i18n="label|Product with no description@@productDescription_noDescription">
						No description yet
					</span>
				</ng-template>
			</editable-label-app>
			<textarea inputApp class="fullWidth" #txt [value]="product?.description || ''"></textarea>
		</editable-field-app>
	</div>

	<!-- dynamic forms -->
	<div class="title-information">Product Information</div>

	<ng-container *ngIf="descriptor$ | async as descriptor">
		<dynamic-form-app
			[inlineLabel]="false"
			[descriptor]="descriptor"
			[colAmount]="2"
			(update)="updateProduct($event)">
		</dynamic-form-app>
	</ng-container>

</card-app>

<card-app>
	<div class="title flex">
		<div class="space-icon flexAround">
			<icon-app name="poll" class="color-primary"></icon-app>
		</div>
		<h2 i18n="div title|Product shipping and tranding information@@productGeneralInfo_shippingTrading" class="flex">
			Shipping & Trading
		</h2>
	</div>

	<ng-container *ngIf="descriptor2$ | async as descriptor">
		<dynamic-form-app
			[inlineLabel]="true"
			[descriptor]="descriptor"
			[colAmount]="2"
			(update)="updateProduct($event)">
		</dynamic-form-app>
	</ng-container>
</card-app>
