

<ng-container *ngIf="products$ | async as products">
	<!-- top panel -->
	<top-panel-app
		[title]="'My Products'"
		[buttonName]="'Add Product'"
		[subtitles]="['Products', 'all']"
		[hasSwitch]="true"
		[hasFilter]="true"
		[view]="view"
		(viewChange)="view = $event"
		(filterClick)="openFilterPanel()"
		(buttonClick)="openCreateDlg()">
	</top-panel-app>

	<!-- views: either one will be displayed when the correct view is selected -->
	<product-list-view-app
		*ngIf="view === 'list'"
		class="list-view"
		[selection]="selection"
		[products]="products"
		[pending]="pending"
		(previewClick)="openPreview($event)"
		(productSelect)="onItemSelected($event)"
		(productUnselect)="onItemUnselected($event)"
		(productOpen)="goToDetails($event)"
		(productFavorited)="onItemFavorited($event)"
		(productUnfavorited)="onItemUnfavorited($event)"
		(bottomReached)="loadMore()"
		(sortColumn)="sortProducts($event)"></product-list-view-app>

	<product-card-view-app
		class="card-view"
		*ngIf="view === 'card'"
		[products]="products"
		[selection]="selection"
		[statuses]="statuses$ | async"
		(update)="patch($event)"
		(productSelect)="onItemSelected($event)"
		(productUnselect)="onItemUnselected($event)"
		(productVote)="onItemVoted($event)"
		(addToProject)="onItemAddToProject($event)"
		(productFavorited)="onItemFavorited($event)"
		(productUnfavorited)="onItemUnfavorited($event)"
		(productOpen)="goToDetails($event)"></product-card-view-app>

	<selection-bar-app
		*ngIf="selection.size > 0"
		[selection]="selection"
		(close)="unselectAll()"
		(delete)="deleteSelected()">

		<selection-actions
			[selection]="selection"
			(openAddToProjectDialog)="openAddToProjectDialog()"
			(openExportDialog)="openExportDialog()"
			(openRequestFeedbackDialog)="openRequestFeedbackDialog()">
		</selection-actions>
	</selection-bar-app>

	<product-filters-app
		(clickOutside)="closeFilterPanel()"
		(filter)="filterProducts($event)"
		*ngIf="filterPanelOpen">
	</product-filters-app>
	<product-preview-app
		[product]="previewProduct"
		(clickOutside)="closePreview()"
		*ngIf="previewOpen">

	</product-preview-app>


</ng-container>


