<ng-container *ngIf="product">

	<product-header-list-app
		[product]="product"
		(update)="updateProduct($event)"
		(export)="commonModalSrv.openExportDialog([$event])"
		(delete)="deleteProduct($event)"
		(archive)="onArchive($event)"	
		(supplierRequest)="openSupplierRequest($event)">
	</product-header-list-app>

	<div class="flex content">
		<div class="left">

			<card-app padding="0">
				<carousel-app
					[entity]="product"
					#carousel
					objectFit="contain"
					[hasPreview]="true"
					[images]="product?.images"
					[size]="411"
					[entity]="product">
				</carousel-app>
			</card-app>

			<!-- Product information -->
			<product-information-app
				[product]="product"
				(update)="updateProduct($event)">
			</product-information-app>

			<!-- team rating here -->
			<product-team-rating-app
				[product]="product"
				(requestTeamVotes)="commonModalSrv.openRequestFeedbackDialog([product])"
				(liked)="onThumbUp()"
				(disliked)="onThumbDown()"
				(openVoteDetails)="commonModalSrv.openVoteDetailsDialog(product?.votes)">
			</product-team-rating-app>

			<!-- projects card -->
			<project-card-app
				[projects]="product?.projects"
				(removeProject)="removeProject($event)"
				(updated)="updateProduct({id: product?.id, projects: $event})">
			</project-card-app>

			<!-- files card -->
			<files-card-app
				[files]="product?.attachments"
				[linkedItem]="product">
			</files-card-app>

		</div>

		<div class="right">

			<!-- Product resume -->
			<product-resume-app
				[product]="product"
				(openPreview)="openPreview()"
				(update)="updateProduct($event)">
			</product-resume-app>

			<!-- navigation bar -->
			<navbar-app [tabs]="tabs"></navbar-app>
			<router-outlet></router-outlet>

    </div>

	</div>

	<supplier-preview-app
		*ngIf="previewOpen"
		[supplier]="product?.supplier"
		(close)="closePreview()">
	</supplier-preview-app>


</ng-container>