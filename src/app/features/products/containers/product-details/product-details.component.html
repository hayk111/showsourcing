<ng-container *ngIf="product">

	<product-top-panel-app
		[product]="product"
		(update)="updateProduct($event)"
		(export)="commonModalSrv.openExportDialog([$event])"
		(delete)="deleteProduct($event)"
		(supplierRequest)="openSupplierRequest($event)">
	</product-top-panel-app>

	<div class="flex content">
		<div class="left">

			<card-app padding="0">
				<carousel-app
					#carousel
					objectFit="contain"
					[hasPreview]="true"
					[images]="product?.images"
					[size]="411"
					[entity]="product">
				</carousel-app>
			</card-app>

			<product-resume-app
				[product]="product"
				(openPreview)="openPreview()">
			</product-resume-app>

			<!-- Product information -->
			<product-information-app
				[product]="product"
				(update)="updateProduct($event)">
			</product-information-app>

			<!-- team rating here -->
			<product-team-rating-app
				[product]="product"
				(requestTeamVotes)="commonModalSrv.openRequestFeedbackDialog([product])"
				(liked)="onThumbUp()"
				(disliked)="onThumbDown()"
				(openVoteDetails)="commonModalSrv.openVoteDetailsDialog(product?.votes)">
			</product-team-rating-app>

			<project-card-app
				[projects]="product?.projects"
				(removeProject)="removeProject($event)"
				(updated)="updateProduct({id: product?.id, projects: $event})">
			</project-card-app>

			<files-card-app
				[files]="product?.attachments"
				[linkedItem]="product">
			</files-card-app>

		</div>

		<div class="right">
				<navbar-app
					[tabs]="[{name: 'Activity'}, {name: 'Shipping'}, {name: 'Samples', number: sampleCount$ | async}, {name: 'Tasks', number: taskCount$ | async}]">
				</navbar-app>
			<router-outlet></router-outlet>
    </div>

	</div>

	<supplier-preview-app
		*ngIf="previewOpen"
		[supplier]="product?.supplier"
		(close)="closePreview()">
	</supplier-preview-app>


</ng-container>