<top-panel-details-app
	[title]="(product$ | async)?.name || 'Unnamed Product'"
	[hasOptions]="true"
	(delete)="deleteProduct()">
	<img-app [image]="(product$ | async)?.images" type="product" size="s"></img-app>
	<icon-app *ngIf="(product$ | async)?.favorite" fontSet="fa" name="heart" class="color-warn"></icon-app>
	<div class="flexColumn">
		<icons-status-app
			[product]="product$ | async"
			[favorite]="false"
			[fullInfo]="true"
			colorTxt="txt-primary">
		</icons-status-app>
		<div class="flex section-info flexWrap">
			<info-badge-app *ngIf="(product$ | async)?.category?.name" type="category">{{ (product$ | async).category.name }}</info-badge-app>
			<info-badge-app *ngFor="let tag of (product$ | async)?.tags" type="tag">{{ tag.name }}</info-badge-app>
			<info-badge-app *ngFor="let project of (product$ | async)?.projects" type="project">{{ project.name }}</info-badge-app>
		</div>
	</div>

	<workflow-action-app
		[typeEntity]="typeEntity"
		[entity]="product$ | async"
		selectSize="l"
		xPosition="-61">
	</workflow-action-app>
</top-panel-details-app>

<ng-container *ngIf="product$ | async as product">

  <div class="flex content">
    <div class="left">

			<product-carousel-app
				[product]="product"
				[images]="product?.images"
				[favorite]="product.favorite"
				(productFavorite)="onFavorited()"
				(productUnfavorite)="onUnfavorited()"
				(requestFeedback)="openRequestFeedbackDialog()"
				(openAddProject)="openAddProjectDlg()"
				(export)="export()">
			</product-carousel-app>

			<!-- team rating here -->
			<product-team-rating-app
				[product]="product"
				(requestTeamVotes)="openRequestFeedbackDialog()"
				(vote)="updateProduct($event)"
				(openVoteDetails)="openVoteDetailsDialog()">
			</product-team-rating-app>

			<supplier-card-app [supplier]="product?.supplier"></supplier-card-app>

			<project-card-app
				(removeProject)="removeProject($event)"
				(addProjectClick)="openAddProjectDlg()"
				[projects]="product.projects"></project-card-app>

			<!-- <files-card-app></files-card-app> -->

		</div>

    <div class="right">
			<product-navigation-app></product-navigation-app>
      <router-outlet></router-outlet>
    </div>

  </div>

</ng-container>

