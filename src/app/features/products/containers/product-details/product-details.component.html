<top-panel-app buttonName="create product" title="My Products" subtitle="details"></top-panel-app>
<ng-container *ngIf="product$ | async as product">
  <div class="flex content">
    <div class="left">

      <card-app class="carouselCard">
        <carousel-selection-app></carousel-selection-app>
      </card-app>

			<card-app>
				<supplier-card-app [supplier]="product?.supplierId | entity:'suppliers' | async"></supplier-card-app>
			</card-app>

			<card-app>
				<project-card-app
					(removeProject)="removeProject($event, product.id)"
					(addProjectClick)="openAddProjectDlg()"
					[projects]="product.projectIds | entityArray: 'projects' | async"></project-card-app>
			</card-app>

			<card-app>
				<files-card-app></files-card-app>
			</card-app>

		</div>

    <div class="right">
      <card-app padding="none">
				<product-top-bar-app [product]="product" [numTasks]="(tasks$ | async).length" (updateStatus)="updateStatus($event, product.id)"></product-top-bar-app>
      </card-app>
      <entity-main-card-app></entity-main-card-app>
    </div>

  </div>

	<product-action-dialog-app
		[dialogName]="projectDlgName"
		header="Add to projects"
		title="My projects"
		buttonLabel="Add projects"
		dialogType="add"
		[entities]="projects$ | async"
		[productsCount]="productsCount$ | async"
		(buttonClicked)="addToProjects($event, product.id)">
	</product-action-dialog-app>

</ng-container>

