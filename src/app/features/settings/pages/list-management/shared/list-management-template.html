
<header-details-app
	[hasBackArrow]="false"
	[headerType]="'settings'">

	<header-details-title-app>
		<span class="list-management-title">
			List {{ typename }} Management <!-- TODO: translation to be added -->
		</span>
	</header-details-title-app>

	<logo-app [typename]="typename" color="secondary" [icon]="typename"></logo-app>
	<header-details-info-app>
		<div class="dot-separator-txt-third list-management-info">
			<span>{{ (teamSrv.teamSelected$ | async)?.name }}</span>
			<span>{{ companySrv.companySync?.name}}</span>
		</div>
	</header-details-info-app>

	<!-- navigation tabs of panel -->
	<header-nav-app>
		<header-nav-item-app
			link="/settings/list-management/category-data"
			icon="category"
			[name]="'nav.categories' | translate">
		</header-nav-item-app>

		<header-nav-item-app
			link="/settings/list-management/tag-data"
			icon="tag"
			[name]="'nav.tags' | translate">
		</header-nav-item-app>

		<header-nav-item-app
			link="/settings/list-management/supplier-data"
			icon="supplier"
			[name]="'nav.suppliers' | translate">
		</header-nav-item-app>

		<header-nav-item-app
			link="/settings/list-management/event-data"
			icon="event"
			[name]="'nav.event' | translate">
		</header-nav-item-app>
	</header-nav-app>

</header-details-app>

<controller-table-app
	[total]="listFuseHelper.total$ | async"
	class="spacing-ms"
	[hasFilters]="false">
	<controller-table-content-app>
		<button class="capitalize" (click)="listFuseHelper.create()">{{ 'button.create-' + typename.toLowerCase() | translate }}</button>
	</controller-table-content-app>
</controller-table-app>

<list-management-table-app
	class="spacing-ms"
	[rows]="items$ | async"
	(renameEntity)="listFuseHelper.update($event)"
	(delete)="listFuseHelper.delete($event)" 
	[selection]="selectionSrv.selection$ | async"
	[pending]="listFuseHelper.pending"
	[isFiltering]="filterSrv.isFiltering"
	[entityMetadata]="typename"
	(select)="selectionSrv.selectOne($event, false)"
	(unselect)="selectionSrv.unselectOne($event, false)"
	(selectAll)="selectionSrv.selectAll($event, false)"
	(showItemsPerPage)="showItemsPerPage($event)"
	(unselectAll)="selectionSrv.unselectAll()"
	>
	<!-- 
		TODO implement this
	[count]="listSrv.count$ | async"
	[currentPage]="listSrv.currentPage"
	(goToPage)="listSrv.loadPage($event)"
	(sort)="listSrv.sort($event)"
-->
</list-management-table-app>

<selection-bar-app
	*ngIf="(selectionSrv.selection$ | async) as selection"
	[entityMetadata]="typename"
	[isShown]="selection.size > 0"
	[selection]="selection"
	(close)="selectionSrv.unselectAll()"
	(selectAll)="selectionSrv.selectAll($event)"
	(unselectAll)="selectionSrv.unselectAll()"
	>
	<!-- [selectableItems]="listSrv.items$ | async" -->

	<div class="flex elements-container">
		<!-- Merge -->
		<button class="icon-with-text light" (click)="mergeSelected()">
			<icon-app name="merge"></icon-app>
			<span>Merge</span> <!-- TODO: translation to be added -->
		</button>

		<!-- Delete -->
		<button class="icon-with-text light" (click)="listFuseHelper.deleteSelected()">
			<icon-app name="trash"></icon-app>
			<span>{{ 'button.delete' | translate }}</span>
		</button> -->
	</div>
</selection-bar-app>
