<table-app
	[rows]="rows"
	[pending]="pending"
	[selected]="selection"
	[contextualMenu]="contextualMenuTemplate"
	[currentSort]="currentSort"
	[count]="count"
	[currentPage]="currentPage"
	placeholder="No sample"
	(goToPage)="goToPage.emit($event)"
	(selectOne)="select.emit($event)"
	(unselectOne)="unselect.emit($event)"
	(showItemsPerPage)="showItemsPerPage.emit($event)"
	(selectAll)="selectAll.emit($event)"
	(unselectAll)="unselectAll.emit($event)"
	(sort)="sort.emit($event)"
	(bottomReached)="bottomReached.emit()">

	<!-- contextual menu -->
	<ng-template #contextualMenuTemplate let-row="row">
		<context-menu-item-app
			class="pointer flexCenter"
			(click)="archive.emit(row)"
			i18n="button@@delete">
			archive
		</context-menu-item-app>
		<context-menu-item-app
			class="pointer flexCenter"
			(click)="delete.emit(row)"
			i18n="button@@delete">
			delete
		</context-menu-item-app>
	</ng-template>

	<!-- title row -->
	<ng-template
		[columnApp]="'name'"
		sortBy="name"
		let-row="row"
		width="280">
		<div class="ellipsis name-container contain-strict">
			<div class="ellipsis">
				<logo-app [logo]="row.logoImage" [ngStyle]="{'float': 'left'}" type="sample" size="m"></logo-app>
				<span class="sample-ref ellipsis">
					<a class="name txt-btn">
						{{ row.reference || '-' }}
					</a>
				</span>
				<div class="sample-name-ref">
					{{ row.name || '-' }}
				</div>
			</div>
		</div>
	</ng-template>

	<!-- product row -->
	<ng-template
		class="capitalize"
		[columnApp]="erm.PRODUCT.singular | const: 'erm'"
		let-row="row"
		sortBy="product.name"
		[grows]="false"
		width="140">
		<div class="ellipsis">
			<span class="product-ref ellipsis">
				{{ row?.product?.reference }}
			</span>
			<div class="product-name-ref">
				{{ row?.product?.name }}
			</div>
		</div>
	</ng-template>

	<!-- supplier row -->
	<ng-template
		[columnApp]="erm.SUPPLIER.singular | const: 'erm'"
		sortBy="supplier.name"
		let-row="row"
		width="220">
		<div class="ellipsis flexCenter supplier-name">
			{{ row?.supplier?.name }}
		</div>
	</ng-template>

	<!-- type row -->
	<ng-template
		[columnApp]="'type' | const: 'erm'"
		let-row="row"
		width="140">
		<div class="ellipsis flexCenter type">
			{{ row?.type }}
		</div>
	</ng-template>

	<!-- created by -->
	<ng-template
		class="capitalize"
		[columnApp]="'created by' | const: 'erm'"
		sortBy="creationDate"
		let-row="row"
		width="250">
		<span class="created-by">{{ row?.createdBy | formatUserName }}</span>
		<div class="created-by-date">
			{{ row?.creationDate | date: 'dd MMMM y' }}
		</div>
	</ng-template>

	<!-- activities -->
	<ng-template
		class="capitalize"
		[columnApp]="'activity' | const: 'erm'"
		[sortable]="false"
		let-row="row"
		width="250">
			<activities-bar-app
				[row]="row"
				[favourite]="row?.product?.favorite">
			</activities-bar-app>
	</ng-template>

	<!-- status -->
	<ng-template
		class="capitalize"
		[columnApp]="'status' | const: 'erm'"
		[sortable]="false"
		let-row="row"
		width="180">
		<div class="status-col flexVAlign">
			<user-picture-app 
				[user]="row?.createdBy" 
				[image]="row.createdBy?.avatar" 
				[background]="false" 
				[fontSize]="16" 
				size="32"></user-picture-app>
			<status-selector-app [entity]="row" [typeEntity]="erm.SUPPLIER" selectSize="s"></status-selector-app>
		</div>
	</ng-template>

</table-app>
