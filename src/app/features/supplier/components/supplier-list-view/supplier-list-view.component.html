<table-app
	[rows]="rows"
	[pending]="pending"
	[selected]="selection"
	[contextualMenu]="contextualMenuTemplate"
	[count]="count"
	[currentPage]="currentPage"
	placeholder="No supplier"
	(goToPage)="goToPage.emit($event)"
	(selectOne)="select.emit($event)"
	(unselectOne)="unselect.emit($event)"
	(showItemsPerPage)="showItemsPerPage.emit($event)"
	(selectAll)="selectAll.emit($event)"
	(unselectAll)="unselectAll.emit($event)"
	(sort)="sort.emit($event)"
	(bottomReached)="bottomReached.emit()">

	<!-- contextual menu -->
	<ng-template #contextualMenuTemplate let-row="row">
		<context-menu-item-app
			class="pointer flexCenter"
			(click)="archive.emit(row)"
			i18n="button@@delete">
			archive
		</context-menu-item-app>
		<context-menu-item-app
			class="pointer flexCenter"
			(click)="delete.emit(row)"
			i18n="button@@delete">
			delete
		</context-menu-item-app>
	</ng-template>

	<!-- supplier row -->
	<ng-template
		[columnApp]="erm.SUPPLIER.singular | const: 'erm'"
		sortBy="name"
		width="280"
		let-row="row">
		<div class="ellipsis name-container contain-strict">
			<div class="ellipsis">
				<logo-app [logo]="row.logoImage" [ngStyle]="{'float': 'left'}" type="supplier" size="m"></logo-app>
				<span class="supplier-ref ellipsis">
					<a class="name txt-btn" [routerLink]="['/supplier', row.id]">
						{{ row.name || '-' }}
					</a>
				</span>
				<div class="supplier-name-ref">
					{{ row.name || '-' }}
				</div>
			</div>
		</div>
	</ng-template>

	<!-- country -->
	<ng-template
		class="capitalize"
		[columnApp]="erm.COUNTRY.singular | const: 'erm'"
		let-row="row"
		sortBy="country"
		[grows]="false"
		width="140">
		<span class="country">{{ row.country | const: 'country'}}</span>
		<div class="country-loc">
			{{ row.country | const: 'country'}}
		</div>
	</ng-template>

	<!-- product type -->
	<ng-template
		class="capitalize"
		[columnApp]="'product type' | const: 'erm'"
		let-row="row"
		[sortable]="false"
		width="250">
		<div class="product-type overflow-hidden">
			<span *ngFor="let cat of row.categories; let last = last; trackBy: trackByFn">
				{{ cat?.name }}{{ last ? '' : ',&nbsp;'}}
			</span>
		</div>
	</ng-template>

	<!-- type row -->
	<ng-template
		class="capitalize"
		[columnApp]="'type' | const: 'erm'"
		let-row="row"
		[sortable]="false"
		width="160">
		<div class="ellipsis pointer txt-btn" class="type"> sadsdsa</div>
	</ng-template>
	
	<!-- created by -->
	<ng-template 
		class="capitalize"
		[columnApp]="'created by' | const: 'erm'"
		[sortable]="false"
		let-row="row"
		width="250">
		<span class="created-by">{{ row?.createdBy | formatUserName }}</span>
		<div class="created-by-date">
			{{ row?.creationDate | date: 'dd MMMM y' }}
		</div>
	</ng-template>

	<!-- activities -->
	<ng-template 
		class="capitalize"
		[columnApp]="'activity' | const: 'erm'"
		[sortable]="false"
		let-row="row"
		width="250">
		<activities-bar-app
			[favourite]="row?.favorite"
			[votes]="row?.votes">
		</activities-bar-app>
	</ng-template>

	<!-- status -->
	<ng-template
		class="capitalize"
		[columnApp]="'status' | const: 'erm'"
		[sortable]="false"
		let-row="row">
		<status-selector-app [entity]="row" [typeEntity]="supplierErm" selectSize="s"></status-selector-app>
	</ng-template>

</table-app>
