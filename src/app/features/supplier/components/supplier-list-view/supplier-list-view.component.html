<table-app
	[rows]="rows"
	[pending]="pending"
	[selected]="selection"
	[contextualMenu]="contextualMenuTemplate"
	[count]="count"
	[currentPage]="currentPage"
	placeholder="{{'placeholder.no-supplier' | translate}}"
	(goToPage)="goToPage.emit($event)"
	(selectOne)="select.emit($event)"
	(unselectOne)="unselect.emit($event)"
	(selectAll)="selectAll.emit($event)"
	(unselectAll)="unselectAll.emit($event)"
	(sort)="sort.emit($event)"
	(bottomReached)="bottomReached.emit()">

	<!-- contextual menu -->
	<ng-template #contextualMenuTemplate let-row="row">
		<context-menu-item-app
			class="pointer flexCenter"
			(click)="delete.emit(row)"
			translate="button.delete">
		</context-menu-item-app>
	</ng-template>

	<!-- supplier row -->
	<ng-template
		[columnApp]="erm.SUPPLIER.singular | const: 'erm'"
		sortBy="name"
		let-row="row"
		width="280">
		<div class="supplier mainCellWrapper flexBetween">
			<a class="capitalize ellipsis txt-btn" [routerLink]="['/supplier', row.id]">
				<logo-app [logo]="row.logoImage" type="supplier" size="m"></logo-app>
				<span class="ellipsis">{{ row.name }}</span>
			</a>
			<button class="preview small secondary-dark" (click)="previewClick.emit(row)" translate="button.preview"></button>
		</div>
	</ng-template>

	<!-- categories -->
	<ng-template
		class="capitalize"
		[columnApp]="erm.CATEGORY.plural | const: 'erm'"
		let-row="row"
		[sortable]="false"
		width="250">
		<div class="overflow-hidden">
			<span *ngFor="let cat of row.categories; let last = last; trackBy: trackByFn">
				{{ cat?.name }}{{ last ? '' : ',&nbsp;'}}
			</span>
		</div>
	</ng-template>

	<!-- country -->
	<ng-template
		class="capitalize"
		[columnApp]="erm.COUNTRY.singular | const: 'erm'"
		let-row="row"
		sortBy="country"
		[grows]="false"
		width="140">
		<span>
			{{ row.country | const: 'country'  }}
		</span>
	</ng-template>

	<!-- tags -->
	<ng-template
		class="capitalize"
		[columnApp]="erm.TAG.plural | const: 'erm'"
		let-row="row"
		[sortable]="false"
		width="250">
		<div class="overflow-hidden">
			<span *ngFor="let tag of row.tags; let last = last;trackBy: trackByFn">
				{{ tag.name }}{{ last ? '' : ',&nbsp;'}}
			</span>
		</div>
	</ng-template>

	<!-- date -->
	<ng-template
		[columnApp]="'creation' | const: 'messages'"
		let-row="row"
		sortBy="creationDate"
		width="150"
		[grows]="false"
		[sortOrder]="'DESC'">
		{{ row?.creationDate | date: 'MMMM y' }}
	</ng-template>

	<!-- user -->
	<ng-template
		[columnApp]="'owner' | const: 'messages'"
		let-row="row"
		sortBy="createdBy.lastName"
		width="150"
		[grows]="false">
		<div class="flex flexCenter">
			<!-- <user-picture-app
				[size]="18"
				[image]="row.createdBy?.avatar"
				[user]="row?.createdBy">
			</user-picture-app> -->
			<span class="ellipsis">{{ row?.createdBy?.firstName }} {{row?.createdBy?.lastName}}</span>
		</div>
	</ng-template>

	<!-- info -->
	<ng-template
		[columnApp]="erm.PRODUCT.plural | const: 'erm'"
		class="capitalize"
		let-row="row"
		[sortable]="false"
		width="140"
		[grows]="false">
		<b class="semi">{{ row?.productsLinked?.count }}</b>
	</ng-template>

	<!-- Action -->
	<ng-template
		[columnApp]="'Fav' | const: 'messages'"
		let-row="row"
		sortBy="favorite"
		width="60"
		[grows]="false">
		<div class="flexCenter">
			<rating-heart-app
				[favorite]="row?.favorite"
				(favorited)="favorited.emit(row.id)"
				(unfavorited)="unfavorited.emit(row.id)">
			</rating-heart-app>
		</div>

	</ng-template>

</table-app>
