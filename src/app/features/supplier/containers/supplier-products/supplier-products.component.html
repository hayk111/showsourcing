<div *ngIf="(dataSrv.items$ | async)?.length || hasSearch; else empty" class="container">
	<sub-panel-app
		[hasSwitch]="false"
		[hasFilter]="false"
		[buttonIcon]="false"
		(search)="search($event)"
		(emptySearch)="test()">
	</sub-panel-app>
	<div class="title"> Products
		<div class="num-products">{{ (dataSrv.items$ | async)?.length }} products</div>
	</div>
	<div class="products-section">
		<ng-container *ngFor="let product of dataSrv.items$ | async; index as i; trackBy: trackById">
			<product-grid-card-app
				[class.mg-right]="(i+1)%4 === 0"
				[product]="product"
				[selection]="selectionSrv.selection$ | async"
				(productFavorite)="dataSrv.onItemFavorited(product.id)"
				(productUnfavorite)="dataSrv.onItemUnfavorited(product.id)"
				(productSelect)="selectionSrv.selectOne(product, true)"
				(productUnselect)="selectionSrv.unselectOne(product, true)"
				(liked)="dataSrv.onThumbUp(product)"
				(disliked)="dataSrv.onThumbDown(product)">
			</product-grid-card-app>
		</ng-container>
	</div>
</div>

<ng-template #empty>
	<div class="empty flexCenter flexColumn">
		<icon-app name="product" fontSet="svg"></icon-app>
		<h1>Currently this supplier had no products associated</h1>
		<!-- <h2>You can start adding products now</h2> -->
		<!-- <button (click)="openCreateDlg(true)">Add Product</button> -->
	</div>
</ng-template>

<selection-bar-app
	[isShown]="(selectionSrv.selection$ | async).size > 0"
	[selection]="selectionSrv.selection$ | async"
	[hasDelete]="false"
	(close)="selectionSrv.unselectAll()"
	(delete)="dataSrv.deleteSelected()">

	<action-bar-app
		[favorite]="selectionSrv.allSelectedFavorite"
		[multiple]="true"
		(onFavorite)="dataSrv.onFavoriteAllSelected()"
		(onUnfavorite)="dataSrv.onUnfavoriteAllSelected()"
		(liked)="dataSrv.onMultipleThumbUp($event)"
		(disliked)="dataSrv.onMultipleThumbDown($event)">

		<button class="icon light" (click)="openAddToProjectDialog()">
			<icon-app class="fs-xl" name="folder-light" fontSet="svg"></icon-app>
		</button>
		<context-menu-app>
			<context-menu-trigger-app>
				<button class="icon light">
					<icon-app name="dots-vertical" size="m"></icon-app>
				</button>
			</context-menu-trigger-app>
			<context-menu-item-app (click)="openExportDialog()">
				Export
			</context-menu-item-app>
			<context-menu-item-app (click)="openRequestFeedbackDialog()">
				Request For Team Feedback
			</context-menu-item-app>
		</context-menu-app>

		<button class="icon light" (click)="dataSrv.deleteSelected()">
			<icon-app name="trash-bin"></icon-app>
		</button>
	</action-bar-app>
</selection-bar-app>
