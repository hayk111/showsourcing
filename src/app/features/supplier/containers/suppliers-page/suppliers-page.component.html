
<top-panel-app
	[title]="'My Suppliers'"
	[subtitles]="['Suppliers', 'all']"
	buttonName="Add Supplier"
	(buttonClick)="openCreateDlg(true)">
</top-panel-app>

<sub-panel-app
  [hasSwitch]="false"
	[hasFilter]="true"
	[buttonIcon]="false"
	[filters]="getFiltersNumber()"
	(showFilters)="openFilterPanel()"
	(search)="search($event)"
	(smartSearch)="smartSearch($event)">
	<search-autocomplete-app [xPosition]="0" [yPosition]="35" [width]="405">
		<search-autocomplete-item-app *ngFor="let element of (smartSearchFilterElements$ | async)">
			<search-autocomplete-item-content-app
				[selectable]="true" [title]="element.name" [subtitle]="element.type"
				[checked]="element.checked" [icon]="element.type"
				(check)="onCheckSearchElement(element)"
				(uncheck)="onUncheckSearchElement(element)">
			</search-autocomplete-item-content-app>
		</search-autocomplete-item-app>
	</search-autocomplete-app>
</sub-panel-app>

<ng-container *ngIf="items$ | async as suppliers; else spinner">
	<supplier-list-view-app
		[rows]="suppliers"
		[selection]="selected$ | async"
		[pending]="pending"
		[currentPage]="currentParams.page"
		[perPage]="currentParams.take"
		(bottomReached)="loadMore()"
		(sort)="sort($event)"
		(select)="onItemSelected($event)"
		(unselect)="onItemUnselected($event)"
		(selectAll)="selectAll($event)"
		(unselectAll)="resetSelection()"
		(open)="goToDetails()"
		(favorited)="onItemFavorited($event)"
		(unfavorited)="onItemUnfavorited($event)"
		(previewClick)="openPreview($event)"
		(previous)="previousPage()"
		(next)="nextPage()">
	</supplier-list-view-app>

	<ng-container *ngIf="selected$ | async as selected">
		<selection-bar-app
			(close)="resetSelection()"
			(delete)="deleteSelected()"
			*ngIf="selected.size > 0"
			[selection]="selected"></selection-bar-app>
	</ng-container>

	<filters-app
		(clickOutside)="closeFilterPanel()"
		(filter)="filter($event)"
		*ngIf="filterPanelOpen">
	</filters-app>

	<supplier-preview-app
		id="test"
		*ngIf="previewOpen"
		[supplier]="previewed"
		(close)="closePreview()"
		(clickOutside)="closePreview()"></supplier-preview-app>
</ng-container>

	<ng-template #spinner>
	<spinner-app></spinner-app>
</ng-template>