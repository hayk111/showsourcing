<div class="container">
	<sub-panel-app
		[hasFilter]="false"
		[hasSwitch]="false"
		(search)="search($event)"
		(smartSearch)="smartSearch($event)">

		<div class="flex show-my-tasks">
			<checkbox-app
				(check)="toggleMyTasks(true)"
				(uncheck)="toggleMyTasks(false)">
			</checkbox-app>
			Show my tasks only
		</div>
		<div class="flex show-tasks-done">
			<checkbox-app
				(check)="toggleDoneTasks(true)"
				(uncheck)="toggleDoneTasks(false)">
			</checkbox-app>
			Completed tasks
		</div>
	</sub-panel-app>

	<task-list-app
		[tasks]="items$ | async"
		[selection]="selected$ | async"
		[fullUser]="true"
		[hasProduct]="true"
		(previewClicked)="openPreview($event)"
		(taskSelect)="onItemSelected($event)"
		(taskUnselect)="onItemUnselected($event)"
		(openCreateDlg)="openCreateDlg()"
		(bottomReached)="loadMore()"
		(updateTask)="updateTask($event)"
		(createTask)="createTask($event)">
	</task-list-app>

	<preview-task-app
		*ngIf="previewOpen"
		[task]="previewed"
		(close)="closePreview()"
		(clickOutside)="closePreview()">
	</preview-task-app>
</div>

<selection-bar-app
	[isShown]="(selected$ | async)?.size > 0"
	[selection]="selected$ | async"
	[hasDelete]="false"
	(close)="resetSelection()"
	(delete)="deleteSelected()">

	<div class="flex">
		<context-menu-app>
			<context-menu-trigger-app>
				<button class="icon light">
					<icon-app name="dots-vertical" size="m"></icon-app>
				</button>
      </context-menu-trigger-app>
      <context-menu-item-app (click)="deleteSelected()">
        Delete
      </context-menu-item-app>
		</context-menu-app>

		<button class="icon light" (click)="deleteSelected()">
			<icon-app name="trash-bin" size="m"></icon-app>
		</button>
	</div>

</selection-bar-app>
