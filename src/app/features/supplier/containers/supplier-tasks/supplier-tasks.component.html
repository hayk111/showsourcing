<div class="container">

	<task-list-app
		[tasks]="listSrv.items$ | async"
		[selection]="listSrv.selection$ | async"
		[hasProduct]="true"
		(toggleMyTasks)="toggleMyTasks($event)"
		(previewClicked)="listSrv.openPreview($event)"
		(taskSelect)="listSrv.selectOne($event, false)"
		(taskUnselect)="listSrv.unselectOne($event, false)"
		(bottomReached)="listSrv.loadMore()"
		(updateTask)="listSrv.update($event)"
		(openCreationTaskDlg)="openCreationTaskDlg()">
	</task-list-app>

	<task-preview-app
		*ngIf="listSrv.previewOpen"
		[task]="listSrv.previewed"
		(close)="listSrv.closePreview()">
	</task-preview-app>
</div>

<selection-bar-app
	[isShown]="(listSrv.selection$ | async)?.size > 0"
	[selection]="listSrv.selection$ | async"
	(close)="listSrv.unselectAll()">

	<div class="flex">
		<context-menu-app>
			<context-menu-trigger-app>
				<button class="icon light">
					<icon-app name="dots-vertical" size="m"></icon-app>
				</button>
      </context-menu-trigger-app>
      <context-menu-item-app (click)="listSrv.deleteSelected()" i18n="button@@delete">
        Delete
      </context-menu-item-app>
		</context-menu-app>

		<button class="icon light" (click)="listSrv.deleteSelected()">
			<icon-app name="trash-bin" size="m"></icon-app>
		</button>
	</div>

</selection-bar-app>
