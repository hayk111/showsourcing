
<div class="top">
	<h1>Sign up</h1>
	<h2 *ngIf="!(pending$ | async)">Just fill this form and get started with power sourcing!</h2>
	<h1 *ngIf="(pending$ | async)">We are creating your account</h1>
	<h2 *ngIf="(pending$ | async)">Please hold as we modify the internet for you!</h2>
</div>

<form [formGroup]="form" autocomplete="on" class="flexColumn" *ngIf="!(pending$ | async); else spinner">
	<error-app *ngIf="error">{{ error }}</error-app>
	<form-field-app>
		<label-app>First Name</label-app>
		<input inputApp required="true"
			autoFocus
			autocomplete="given-name" formControlName="firstName" type="text" placeholder="Your first name"/>
	</form-field-app>

	<form-field-app>
		<label-app>Last Name</label-app>
		<input inputApp required="true"
			autocomplete="family-name" formControlName="lastName" type="text" placeholder="Your last name"/>
	</form-field-app>

	<form-field-app>
		<label-app>Email</label-app>
		<input [class.error]="error && !form.get('email').dirty" inputApp required="true"
			autocomplete="email" formControlName="email" type="email" placeholder="Your email"/>
		<p class="error" *ngIf="error && !form.get('email').dirty">Please pick another email</p>
		<hint-app>Tip: the app works better with a company email</hint-app>
	</form-field-app>

	<form-field-app>
		<label-app>Password</label-app>
		<input #pw inputApp required="true" autocomplete="new-password" minlength="8" formControlName="password" type="password"
			placeholder="Your password"/>
		<error-app *ngIf="form.get('password').hasError('minlength')">Minimum 8 characters required</error-app>
	</form-field-app>


  <input class="button fullWidth" type="submit" [disabled]="!form.valid" value="Create Account" (click)="createAccount()"/>

	<a class="button light flexCenter fullWidth" [routerLink]="['../login']">Have an account? Sign-In!</a>
</form>

<ng-template #spinner>
	<spinner-app></spinner-app>
</ng-template>
