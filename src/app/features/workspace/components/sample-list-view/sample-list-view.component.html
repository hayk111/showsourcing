<table-app
	[rows]="rows"
	[pending]="pending"
	[selected]="selection"
	[contextualMenu]="contextualMenuTemplate"
	[count]="count"
	[currentPage]="currentPage"
	placeholder="No Samples"
	(goToPage)="goToPage.emit($event)"
	(selectOne)="select.emit($event)"
	(unselectOne)="unselect.emit($event)"
	(selectAll)="selectAll.emit($event)"
	(unselectAll)="unselectAll.emit($event)"
	(sort)="sort.emit($event)"
	(bottomReached)="bottomReached.emit()">

	<!-- contextual menu -->
	<ng-template #contextualMenuTemplate let-row="row">
		<context-menu-item-app
			class="pointer flexCenter"
			(click)="delete.emit(row)"
			i18n="@@delete">
			delete
		</context-menu-item-app>
	</ng-template>

	<!-- name -->
	<ng-template
		class="capitalize"
		[columnApp]="'samples' | const: 'messages'"
		let-row="row"
		sortBy="name"
		width="350">
		<div class="mainCellWrapper name-container ellipsis">
			<div class="mainCell">
				<img-app [image]="row?.images ? row?.images[0] : null" type="sample" size="s"></img-app>
				<span class="ellipsis pointer txt-btn" (click)="previewClick.emit(row)">{{ row?.name }}</span>
			</div>
			<div class="preview">
				<button class="secondary-dark small" (click)="previewClick.emit(row)" i18n="@@preview">preview</button>
			</div>
		</div>
	</ng-template>

	<!-- assignee -->
	<ng-template
		class="capitalize"
		[columnApp]="'assignee' | const: 'messages'"
		let-row="row"
		sortBy="assignee.lastName"
		width="200">
		<div class="flex assignee-container ellipsis">
			<user-picture-app	[user]="row?.assignee" size="24" [border]="true"></user-picture-app>
			{{ row?.assignee?.firstName }} {{ row.assignee?.lastName ? row?.assignee?.lastName[0] + '.' : ''}}
		</div>
	</ng-template>

	<!-- product -->
	<ng-template
		class="capitalize"
		[columnApp]="'product' | const: 'messages'"
		let-row="row"
		sortBy="product.name"
		width="250">
		<div *ngIf="row?.product" class="pointer ellipsis" (click)="openProduct.emit(row?.product?.id)">{{ row?.product?.name }}</div>
	</ng-template>

	<!-- supplier -->
	<ng-template
		class="capitalize"
		[columnApp]="'supplier' | const: 'messages'"
		let-row="row"
		sortBy="supplier.name"
		width="300">
		<div *ngIf="row?.supplier" class="pointer ellipsis" (click)="openSupplier.emit(row.supplier.id)">{{ row?.supplier?.name }}</div>
	</ng-template>

	<!-- comments -->
	<ng-template
		[columnApp]="'comments' | const: 'messages'"
		let-row="row"
		[sortable]="false"
		width="150">
		<div class="flex ellipsis">
			<div class="number">{{ row?.comments?.length || '0' }}</div>
			&nbsp;
			<ng-container i18n="@@nested_comment">{ row?.comments?.length || 0, plural, =1 { comment } other { comments } } </ng-container>
		</div>
	</ng-template>

	<!-- status -->
		<ng-template
		class="capitalize"
		[columnApp]="'status' | const: 'messages'"
		let-row="row"
		sortBy="status.step"
		width="170">
		<status-selector-app
			[entity]="row"
			[typeEntity]="erm.SAMPLE">
		</status-selector-app>
	</ng-template>

	<!-- created on -->
	<ng-template
		class="capitalize"
		[columnApp]="'created on' | const: 'messages'"
		let-row="row"
		sortBy="createdBy.lastName"
		width="150">
		{{ row?.creationDate | date: 'dd MMMM y' }}
	</ng-template>

</table-app>